/*! For license information please see main.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./src/main.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _parser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parser */ \"./src/parser.js\");\n/* harmony import */ var _parser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_parser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _language_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./language/controller */ \"./src/language/controller.js\");\n/* harmony import */ var _language_controller__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_language_controller__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _term_controller__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./term/controller */ \"./src/term/controller.js\");\n/* harmony import */ var _term_controller__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_term_controller__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _language_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./language/view */ \"./src/language/view.js\");\n/* harmony import */ var _language_view__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_language_view__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _term_view__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./term/view */ \"./src/term/view.js\");\n/* harmony import */ var _term_view__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_term_view__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _mainView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mainView */ \"./src/mainView.js\");\n/* harmony import */ var _mainView__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_mainView__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nconst Add = () => {\n    const own = document.querySelector('.quick-custom-gsearch');\n    if (own !== null) {\n        return false;\n    }\n    if ((_parser__WEBPACK_IMPORTED_MODULE_0___default().IsTextSearch() === true && _parser__WEBPACK_IMPORTED_MODULE_0___default().IsUCS() === true)\n        || _parser__WEBPACK_IMPORTED_MODULE_0___default().IsOnlyQuery() === true) {\n        // MainView\n        const mainDiv = _mainView__WEBPACK_IMPORTED_MODULE_5___default().CreateElement();\n        _mainView__WEBPACK_IMPORTED_MODULE_5___default().BindElement(mainDiv);\n        // LanguageView\n        const languageDiv = _language_view__WEBPACK_IMPORTED_MODULE_3___default().CreateElement();\n        _language_view__WEBPACK_IMPORTED_MODULE_3___default().BindElement(languageDiv);\n        // TermView\n        const termDiv = _term_view__WEBPACK_IMPORTED_MODULE_4___default().CreateElement();\n        _term_view__WEBPACK_IMPORTED_MODULE_4___default().BindElement(termDiv);\n        const o = _parser__WEBPACK_IMPORTED_MODULE_0___default().QueryHashToArray();\n        const range = _term_controller__WEBPACK_IMPORTED_MODULE_2___default().Validate(o.tbs);\n        const language = _language_controller__WEBPACK_IMPORTED_MODULE_1___default().Validate(o.lr);\n        _term_view__WEBPACK_IMPORTED_MODULE_4___default().SetCssState(range);\n        _language_view__WEBPACK_IMPORTED_MODULE_3___default().SetCssState(language);\n        return true;\n    }\n    return false;\n};\nconst CallOnscroll = () => {\n    function fixing() {\n        const e = document.querySelector('.quick-custom-gsearch');\n        const y = window.scrollY;\n        if (y > 90) {\n            e.style.position = 'fixed';\n            e.style.top = '70px';\n        }\n        else {\n            e.style.position = 'absolute';\n            e.style.top = '159px';\n        }\n    }\n    window.onscroll = fixing;\n};\nconst Main = () => {\n    const Observer = new MutationObserver(() => {\n        Add();\n    });\n    const elm = document.getElementById('main');\n    if (elm !== null) {\n        Add();\n        Observer.observe(elm, { childList: true });\n    }\n    CallOnscroll();\n};\nMain();\n\n\n//# sourceURL=webpack://chrome-extension/./src/main.ts?")},"./src/language/controller.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("const Model = __webpack_require__(/*! ../model.js */ \"./src/model.js\");\n\nconst Controller = {\n  Validate(language) {\n    if (typeof language === 'undefined' || language === '') {\n      return '';\n    }\n    if (Model.SWITCH_LANGUAGES_VALUE_PATTERN.test(language)) {\n      return RegExp.$1;\n    }\n    return 'none';\n  },\n};\n\nmodule.exports = Controller;\n\n\n//# sourceURL=webpack://chrome-extension/./src/language/controller.js?")},"./src/language/view.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("const Model = __webpack_require__(/*! ../model.js */ \"./src/model.js\");\nconst Parser = __webpack_require__(/*! ../parser.js */ \"./src/parser.js\");\nconst Controller = __webpack_require__(/*! ./controller.js */ \"./src/language/controller.js\");\n\nconst LanguageView = {\n  SetCssState(language) {\n    if (language === 'none') {\n      return false;\n    }\n    const value = (language) ? `=${language}` : '=\"\"';\n    const a = document.querySelector(`.quick-custom-gsearch .language a[data${value}]`);\n    a.className = 'active';\n    return true;\n  },\n  CreateElement() {\n    const languages = Model.SWITCH_LANGUAGES;\n    const div = document.createElement('div');\n    div.className = 'language';\n    const spanHead = document.createElement('span');\n    const spanTail = spanHead.cloneNode();\n    spanHead.innerText = 'Language';\n    spanHead.className = 'head';\n\n    div.appendChild(spanHead);\n    Object.keys(languages).forEach((i) => {\n      const elm = document.createElement('a');\n      elm.setAttribute('data', languages[i].data);\n      elm.appendChild(document.createTextNode(languages[i].text));\n      elm.addEventListener('click', LanguageView.QuickChange.bind(elm), false);\n      div.appendChild(elm);\n    });\n    div.appendChild(spanTail);\n    return div;\n  },\n  BindElement(div) {\n    const target = document.querySelector('div.quick-custom-gsearch');\n    target.insertBefore(div, target.firstChild);\n  },\n  QuickChange() {\n    const language = this.getAttribute('data');\n    const o = Parser.QueryHashToArray();\n    if (Parser.IsOnlyQuery()) {\n      const plainQuery = window.location.search.substring(1).split('=')[1];\n      o.q = decodeURIComponent(plainQuery);\n    }\n    if (language !== 'none') {\n      o.lr = Controller.Validate(language);\n    }\n    const parameter = Parser.BuildParameterByQueryObject(o);\n    return Parser.RewriteURI(parameter);\n  },\n};\n\nmodule.exports = LanguageView;\n\n\n//# sourceURL=webpack://chrome-extension/./src/language/view.js?")},"./src/mainView.js":module=>{eval("const MainView = {\n  CreateElement() {\n    const mainDiv = document.createElement('div');\n    mainDiv.className = 'quick-custom-gsearch';\n    const termDiv = document.createElement('div');\n    termDiv.className = 'term';\n    const languageDiv = document.createElement('div');\n    languageDiv.className = 'language';\n\n    return mainDiv;\n  },\n  BindElement(div) {\n    const ucs = document.querySelector('div#main');\n    ucs.insertBefore(div, ucs.firstChild);\n  },\n};\n\nmodule.exports = MainView;\n\n\n//# sourceURL=webpack://chrome-extension/./src/mainView.js?")},"./src/model.js":module=>{eval("const Model = {\n  TERM_VALUE_PATTERN: /^(w1|m1|m3|m6|y2|y3|y)$/,\n  TERM_ARG_PATTERN: /^qdr:(w1|m1|m3|m6|y|y2|y3)$/,\n  TERM_INCLUDE_COMMA_PATTERN: /^(qdr:)(w1|m1|m3|m6|y|y2|y3),/,\n  TERM: {\n    0: { data: 'none', text: 'Any time' },\n    1: { data: 'w1', text: 'Past 1 Week' },\n    2: { data: 'm1', text: 'Past 1 Month' },\n    3: { data: 'm3', text: 'Past 3 Month' },\n    4: { data: 'm6', text: 'Past 6 Month' },\n    5: { data: 'y', text: 'Past 1 Year' },\n    6: { data: 'y2', text: 'Past 2 Year' },\n    7: { data: 'y3', text: 'Past 3 Year' },\n  },\n  SWITCH_LANGUAGES_VALUE_PATTERN: /^(lang_en|lang_local)$/,\n  SWITCH_LANGUAGES: {\n    0: { data: '', text: 'Any pages' },\n    1: { data: 'lang_en', text: 'English pages' },\n    2: { data: 'lang_local', text: 'Local pages' },\n  },\n};\n\nmodule.exports = Model;\n\n\n//# sourceURL=webpack://chrome-extension/./src/model.js?")},"./src/parser.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("const Model = __webpack_require__(/*! ./model.js */ \"./src/model.js\");\n\nconst Parser = {\n  IsUCS() {\n    const ucs = document.querySelector('div#main');\n    return ucs !== null;\n  },\n  IsTextSearch() {\n    const o = Parser.QueryHashToArray();\n    if (\n      (typeof o.tbs === 'undefined' || typeof o.lr === 'undefined')\n      && Object.keys(o).length < 3\n    ) {\n      return false;\n    }\n    if (typeof o.tbm === 'undefined' || o.tbm === '') {\n      return true;\n    }\n    return false;\n  },\n  QueryHashToArray() {\n    const o = {};\n    if (window.location.pathname !== '/' && !/^\\/(search|webhp)$/.test(window.location.pathname)) {\n      return o;\n    }\n    const q = (/&/.test(window.location.search)) ? decodeURIComponent(window.location.search).slice(1).split('&') : [];\n    const h = (/#/.test(window.location.hash)) ? decodeURIComponent(window.location.hash).slice(1).split('&') : [];\n\n    if (h.length > 0) {\n      for (let i = 0; i < h.length; ++i) {\n        const a = h[i].split('=');\n        o[a[0]] = a[1];\n      }\n      return o;\n    }\n    for (let i = 0; i < q.length; ++i) {\n      const a = q[i].split('=');\n      o[a[0]] = a[1];\n    }\n    o.tbs = Parser.fixTbsComma(o.tbs);\n    return o;\n  },\n  fixTbsComma(str) {\n    if (Model.TERM_INCLUDE_COMMA_PATTERN.test(str)) {\n      return RegExp.$1 + RegExp.$2;\n    }\n    return str;\n  },\n  BuildParameterByQueryObject(opts) {\n    const array = Object.keys(opts).map(key => `${key}=${opts[key]}`);\n    return array.join('&');\n  },\n  RewriteURI(parameter) {\n    const path = `/search?${parameter}`;\n    window.location.href = path;\n    return path;\n  },\n  IsOnlyQuery() {\n    const str = window.location.search;\n    if (/^\\?q=/.test(str) && str.indexOf('&') === -1) {\n      return true;\n    }\n\n    return false;\n  }\n};\n\nmodule.exports = Parser;\n\n\n//# sourceURL=webpack://chrome-extension/./src/parser.js?")},"./src/term/controller.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("const Model = __webpack_require__(/*! ../model.js */ \"./src/model.js\");\nconst Parser = __webpack_require__(/*! ../parser.js */ \"./src/parser.js\");\n\nconst Controller = {\n  GetRangeByQueryString() {\n    const o = Parser.QueryHashToArray();\n    if (typeof o.tbs === 'undefined' || o.tbs === '') {\n      return 'none';\n    }\n    if (Model.TERM_ARG_PATTERN.test(o.tbs)) {\n      return RegExp.$1;\n    }\n    return 'none';\n  },\n  Validate(term) {\n    if (typeof term === 'undefined' || term === '') {\n      return 'none';\n    }\n    if (Model.TERM_VALUE_PATTERN.test(term)) {\n      return RegExp.$1;\n    }\n    if (Model.TERM_ARG_PATTERN.test(term)) {\n      return RegExp.$1;\n    }\n    return 'none';\n  },\n  RewriteURI(range, q) {\n    const prePath = `/search?q=${q}&`;\n    let resultPath = '';\n    if (Model.TERM_VALUE_PATTERN.test(range)) {\n      resultPath = `${prePath}tbs=qdr:${range}&tbm=`;\n    } else {\n      resultPath = `${prePath}tbm=`;\n    }\n    window.location.href = resultPath;\n    return resultPath;\n  },\n};\n\nmodule.exports = Controller;\n\n\n//# sourceURL=webpack://chrome-extension/./src/term/controller.js?")},"./src/term/view.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("const Model = __webpack_require__(/*! ../model.js */ \"./src/model.js\");\nconst Parser = __webpack_require__(/*! ../parser.js */ \"./src/parser.js\");\nconst Controller = __webpack_require__(/*! ./controller.js */ \"./src/term/controller.js\");\n\nconst TermView = {\n  SetCssState(range) {\n    const a = document.querySelector(`.quick-custom-gsearch .term a[data=${range}]`);\n    a.className = 'active';\n  },\n  CreateElement() {\n    const term = Model.TERM;\n    const div = document.createElement('div');\n    div.className = 'term';\n    const spanHead = document.createElement('span');\n    const spanTail = spanHead.cloneNode();\n    spanHead.innerText = 'Term';\n    spanHead.className = 'head';\n\n    div.appendChild(spanHead);\n    Object.keys(term).forEach((i) => {\n      const elm = document.createElement('a');\n      elm.setAttribute('data', term[i].data);\n      elm.appendChild(document.createTextNode(term[i].text));\n      elm.addEventListener('click', TermView.QuickChange.bind(elm), false);\n      div.appendChild(elm);\n    });\n    div.appendChild(spanTail);\n    return div;\n  },\n  BindElement(div) {\n    const target = document.querySelector('div.quick-custom-gsearch');\n    target.insertBefore(div, target.firstChild);\n  },\n  QuickChange() {\n    const range = this.getAttribute('data');\n    const o = Parser.QueryHashToArray();\n    if (Parser.IsOnlyQuery()) {\n      const plainQuery = window.location.search.substring(1).split('=')[1];\n      o.q = decodeURIComponent(plainQuery);\n    }\n    if (range === 'none') {\n      delete o.tbs;\n    } else {\n      o.tbs = `qdr:${Controller.Validate(range)}`;\n    }\n    o.tbm = '';\n    const parameter = Parser.BuildParameterByQueryObject(o);\n    return Parser.RewriteURI(parameter);\n  },\n};\n\nmodule.exports = TermView;\n\n\n//# sourceURL=webpack://chrome-extension/./src/term/view.js?")}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(e,n)=>{for(var r in n)__webpack_require__.o(n,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/main.ts")})();